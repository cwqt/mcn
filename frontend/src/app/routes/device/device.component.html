<div class="device-container" *ngIf="device">
  <div class="title">
    <h1>
      {{ device.name }}
      <h4>
        @{{ device.network_name }}:<b>{{ device.hardware_model }}</b>
      </h4>
    </h1>
    <div class="manage-device-buttons">
      <ibm-overflow-menu [flip]="true" [offset]="0">
        <ibm-overflow-menu-option>Edit details</ibm-overflow-menu-option>
        <ibm-overflow-menu-option>Change API key</ibm-overflow-menu-option>
        <ibm-overflow-menu-option>Re-assign</ibm-overflow-menu-option>
        <ibm-overflow-menu-option type="danger"
          >Delete device</ibm-overflow-menu-option
        >
      </ibm-overflow-menu>
    </div>
  </div>
</div>

<br />

<ibm-tile>
  <mat-tab-group *ngIf="cache.device.data" class="light">
    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon>bar_chart</mat-icon>
        Measurements
      </ng-template>
      <div class="plant-container">
        <div class="device-container" *ngIf="!cache.device.loading">
          <div *ngIf="!cache.sensors.loading">
            <app-sensor-list
              [sensors]="cache.sensors.data"
              [authorUser]="cache.user.data"
              [currentUser]="currentUser"
            >
            </app-sensor-list>
          </div>

          <div *ngIf="!cache.measurements.loading">
            <!-- <app-measurements-graphs [data]="measurements" [device]="cache.device.data"></app-measurements-graphs> -->
          </div>
        </div>
      </div>
    </mat-tab>

    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon>information</mat-icon>
        Information
      </ng-template>
      <div class="device-info">
        <ibm-table-container>
          <ibm-table-header>
            <h4 ibmTableHeaderTitle>Description</h4>
            <p ibmTableHeaderDescription>{{ cache.device.data.short_desc }}</p>
          </ibm-table-header>
        </ibm-table-container>

        <div lightbox-group id="gallery">
          <img
            src="https://cdn.discordapp.com/attachments/264522461943562244/704820132312252426/IMG_0028.JPG"
            lightbox
            [fullImage]="{ path: 'path_to_fullimage' }"
          />
          <img
            src="https://playwithmyled.com/wp-content/uploads/2013/12/smart-garden1-1024x768.jpg"
            lightbox
            [fullImage]="{ path: 'path_to_fullimage' }"
          />
          <img src="" lightbox [fullImage]="{ path: 'path_to_fullimage' }" />
        </div>

        <br />

        <div class="device-info-footer">
          <mat-chip-list>
            <mat-chip>One fish</mat-chip>
            <mat-chip>Two fish</mat-chip>
            <mat-chip color="primary" selected>Primary fish</mat-chip>
            <mat-chip color="accent" selected>Accent fish</mat-chip>
          </mat-chip-list>
        </div>
      </div>
    </mat-tab>

    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon>toggle_on</mat-icon>
        Control
      </ng-template>
      <div class="device-container">
        <app-device-control
          [device]="cache.device.data"
          [authorUser]="cache.user.data"
          [currentUser]="currentUser"
        >
        </app-device-control>
      </div>
    </mat-tab>

    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon>play_for_work</mat-icon>
        Task routines
      </ng-template>
      <div class="device-container">
        <app-scheduled-tasks
          [device]="cache.device.data"
          [authorUser]="cache.user.data"
          [currentUser]="currentUser"
        >
        </app-scheduled-tasks>
      </div>
    </mat-tab>
  </mat-tab-group>

  <br />

  <div class="device-container bottom">
    <app-postable-social-actions
      *ngIf="cache.device.data != undefined"
      [postable]="cache.device.data"
      [type]="'device'"
      [authorUser]="cache.user.data"
      [currentUser]="currentUser"
      [justify]="true"
    >
    </app-postable-social-actions>
  </div>
</ibm-tile>

<!-- <mat-divider></mat-divider>
<div class="device-container">
    <app-postable-replies></app-postable-replies>
</div> -->

<mat-spinner *ngIf="cache.device.loading"></mat-spinner>
