<div>
    <!-- post / repost with a comment  -->
    <div class="post-thumb-container" [class.mini]="mini" (click)="gotoPost()" *ngIf="post.content">
        <button *ngIf="repostType != 'repost'" mat-icon-button class="post-options-dropdown-icon"><mat-icon>keyboard_arrow_down</mat-icon></button>
        <p *ngIf="repostType == 'repost'" class="repost-line">
            <mat-icon>repeat</mat-icon> {{parentAuthor.name}} Reposted 
        </p>

        <div class="post-thumb-content">
            <div class="left">
                <img src="{{author.avatar}}">
            </div>
            <div class="right">
                <p><b>{{author.name}}</b> <span>@{{author.username}} · {{ post.created_at | amTimeAgo}}</span></p>
                
                <div *ngIf="!post.repostType">
                    <p>{{post.content}}</p>
                </div>

                <div *ngIf="post.repost" class="repost">

                    <app-post-thumb *ngIf="post.repost.type == 'repost-post'"
                        [mini]="true"
                        [post]="post.repost.content"
                        [author]="post.repost.author"
                        [currentUser]="currentUser"
                        [repostType]="'repost-comment'">
                    </app-post-thumb>                        

                    <div *ngIf="post.repost.type == 'repost-recordable'">
                        <p>{{post.content.content}}</p>
                    </div>


                    <div class="device-mini" *ngIf="post.repost.type == 'repost-device'">
                        <p class="mini-header"><img src="{{post.repost.author.avatar}}"><b>{{post.repost.author.name}}</b> <span>@{{post.repost.author.username}} · Created {{ post.repost.content.created_at | amTimeAgo}}</span></p>
                        <mat-divider></mat-divider>
                        <app-device-thumb
                            [mini]="true"
                            [device]="post.repost.content"
                            [profileUser]="post.repost.author"
                            [currentUser]="currentUser">
                        </app-device-thumb>    
                    </div>
                </div>
            
                <mat-card-actions *ngIf="!repostType && !mini">
                    <button mat-icon-button>
                        <mat-icon>reply</mat-icon>
                        <span>{{post.meta.replies}}</span>
                    </button>
                    <button mat-icon-button [class.isHearting]="post.meta.isHearting" (click)="heart()">
                        <mat-icon>{{post.meta.isHearting ? 'favorite' : 'favorite_border'}}</mat-icon>
                        <span>{{post.meta.hearts}}</span>
                    </button>
                    <button mat-icon-button [class.hasReposted]="post.meta.hasReposted">
                        <mat-icon>repeat</mat-icon>
                        <span>{{post.meta.reposts}}</span>
                    </button>
                </mat-card-actions>
            </div>    
        </div>
    </div>
    
    <!-- just a straight re-post -->
    <div *ngIf="post.repost && !post.content">
        <app-post-thumb
            [post]="post.repost.content"
            [author]="post.repost.author"
            [currentUser]="currentUser"
            [parentAuthor]="author"
            [repostType]="'repost'"
        ></app-post-thumb>    
    </div>

</div>
